if __name__ == "__main__":
    a, b = map(int, input().split())
    c = [list(map(int, input().split())) for _ in range(a)]
    ans = 0

    blocks = (
        ((0, 1), (0, 2), (0, 3)),
        ((1, 0), (2, 0), (3, 0)),
        ((1, 0), (1, 1), (1, 2)),
        ((0, 1), (1, 0), (2, 0)),
        ((0, 1), (0, 2), (1, 2)),
        ((1, 0), (2, 0), (2, -1)),
        ((0, 1), (0, 2), (-1, 2)),
        ((1, 0), (2, 0), (2, 1)),
        ((0, 1), (0, 2), (1, 0)),
        ((0, 1), (1, 1), (2, 1)),
        ((0, 1), (1, 0), (1, 1)),
        ((0, 1), (-1, 1), (-1, 2)),
        ((1, 0), (1, 1), (2, 1)),
        ((0, 1), (1, 1), (1, 2)),
        ((1, 0), (1, -1), (2, -1)),
        ((0, 1), (0, 2), (-1, 1)),
        ((0, 1), (0, 2), (1, 1)),
        ((1, 0), (2, 0), (1, 1)),
        ((1, 0), (2, 0), (1, -1)),
    )

    for i in range(a):
        for j in range(b):
            for block in blocks:
                ok = True
                s = c[i][j]
                for dx, dy in block:
                    x, y = i+dx, j+dy
                    if 0 <= x < a and 0 <= y < b:
                        s += c[x][y]
                    else:
                        ok = False
                        break
                if ok and ans < s:
                    ans = s
    print(ans)



